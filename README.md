# shex-methods

A library to read, create, update or delete rdf nodes that fit a given shape expression.

[Examples](#examples) | [Usage](#usage) | [Features](#features) | [Contributing](#contributing)

## Examples

To create a shape factory you can generate context and types using [shex-codegen](https://github.com/ludwigschubi/shex-codegen/).
```typescript
import { Shape } from "shex-methods";
import {
  chatShex,
  ChatShape,
  ChatShapeType,
  ChatShapeContext,
} from "../resources/shex"; // generated by shex-codegen

const chat = new Shape<ChatShape>({
  id: "https://shaperepo.com/schemas/longChat#ChatShape",
  shape: chatShex,
  context: ChatShapeContext,
  type: ChatShapeType,
});
```

Then you can use the factory to create shapes using plain javascript-objects for specifying data. The id of the input data will be used as the node iri of the shape so make sure to pass a valid url.
```typescript
const newChat = await chat.create({
  doc: testDoc,
  data: {
    id: firstChatIri,
    type: ChatShapeType.LongChat,
    title: "Test Chat",
    author: webId,
    created: new Date(),
  } as ChatShape,
});
const { data, errors } = newChat;
```

## Usage

Install the package via your preferred node package manager:
`npm i --save-dev shex-methods` or `yarn add -D shex-methods`

Documentation of all available methods will soon follow.

## Features

Current features:
* Can read, create, update and delete a single shape in remote resources
* Can read multiple shapes in remote resources
* User can specify data as primitive type or rdf node

Planned features:
* Can do all operations on a local graph
* Can create, update and delete many nodes at once
* Can publish a shape to an index of shapes
* Can subscribe to an index of shapes

## Contributing

Use `yarn develop` to start the build process in watch mode and run the tests on file changes.

If you have a use case in which the generated code is incorrect/corrupt please include an example in your pr/issue.
